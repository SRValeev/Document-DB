# ======================
# Основные настройки системы
# ======================
system:
  name: "RAG Document Assistant"
  version: "1.0"
  debug: false
  log_level: "INFO"  # DEBUG/INFO/WARNING/ERROR/CRITICAL

# ======================
# Настройки производительности
# ======================
performance:
  embedding_batch_size: 32
  qdrant_batch_size: 100
  max_threads: 4
  file_processing_timeout: 300  # seconds

# ======================
# Обработка документов
# ======================
processing:
  # Размеры чанков
  chunk_size: 768
  chunk_overlap: 200
  min_chunk_size: 300
  smart_chunking: true
  
  # Модели
  embedding_model: "sentence-transformers/paraphrase-multilingual-mpnet-base-v2"
  spacy_model: "ru_core_news_md"
  default_language: "ru"
  
  # Пороги
  min_similarity: 0.65
  max_file_size_mb: 50
  
  # Параметры потоков
  num_workers: 4
  device: "cpu"  # cpu/cuda/mps
  
  # Регулярные выражения
processing:
  regex_patterns:
    header: '^(Глава|Раздел|Часть|Параграф)\s+\d+[.:]?\s+'  # Одинарные кавычки
    subheader: '^\d+\.\d+\.\s+'
  
  # Поддерживаемые форматы
  supported_formats:
    - ".pdf"
    - ".docx"
    - ".doc"
    - ".pptx"
    - ".xlsx"
    - ".txt"

# ======================
# Настройки контекста
# ======================
context:
  max_chunks: 5
  min_relevance: 0.40
  mmr_enabled: true
  diversity_factor: 0.3
  clean_stopwords: true
  
  # Форматирование вывода
  show_sources: true
  show_page_numbers: true
  show_relevance_scores: false

# ======================
# Настройки Qdrant
# ======================
qdrant:
  host: "localhost"
  port: 6333
  collection_name: "document_chunks"
  vector_size: 768
  
  # Параметры поиска
  search_params:
    limit: 10
    with_payload: true
    with_vectors: false
    exact_search: false
    timeout: 30.0  # seconds

# ======================
# Пути к директориям
# ======================
paths:
  log_file: "logs/application.log"
  data_dir: "data"
  output_dir: "processed"
  index_dir: "index"
  log_dir: "logs"
  temp_dir: "temp"
  global_index_file: "global_index.json"
  
  protected_files:
    - "global_index.json"
    - "processing_info.json"

# ======================
# Настройки LLM
# ======================
llm:
  api_url: "http://localhost:1234/v1"
  model: "google/gemma-3-4b"
  timeout: 60.0  # seconds
  
  # Параметры генерации
  generation_params:
    temperature: 0.3
    max_tokens: 1000
    top_p: 0.9
    frequency_penalty: 0.2
    presence_penalty: 0.2
  
  # Системный промпт
  system_prompt: |
    Ты - ассистент для работы с документами. Отвечай точно и по делу.
    Используй только предоставленный контекст. Если информации нет - скажи об этом.

# ======================
# Настройки OCR
# ======================
ocr:
  enabled: false
  languages: ["rus", "eng"]
  dpi: 300
  timeout: 30
  engine: "tesseract"  # tesseract/easyocr

# ======================
# Настройки таблиц
# ======================
tables:
  enabled: true
  max_table_size: 10
  format: "markdown"  # markdown/csv/json
  extraction_method: "camelot"  # camelot/pdfplumber

# ======================
# Настройки безопасности
# ======================
security:
  max_upload_size_mb: 300
  allowed_file_types:
    - "application/pdf"
    - "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
    - "application/msword"
    - "application/vnd.openxmlformats-officedocument.presentationml.presentation"
    - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
    - "text/plain"
  enable_auth: false
  api_key: ""