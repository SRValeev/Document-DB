# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π - Python 3.12+ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

## üéØ –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### ‚ùå –û—Å–Ω–æ–≤–Ω—ã–µ –æ—à–∏–±–∫–∏:

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –≤–µ—Ä—Å–∏–π Python**
   - –ú–Ω–æ–≥–∏–µ –ø–∞–∫–µ—Ç—ã –∏–º–µ–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è `<3.12`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python 3.12+
   - –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–µ—Ä—Ö–Ω–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤

2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ SpaCy –º–æ–¥–µ–ª–µ–π**
   - `ru_core_news_md` –≤ requirements.txt –∫–∞–∫ PyPI –ø–∞–∫–µ—Ç (–Ω–µ–≤–µ—Ä–Ω–æ!)
   - SpaCy –º–æ–¥–µ–ª–∏ –ù–ï —è–≤–ª—è—é—Ç—Å—è PyPI –ø–∞–∫–µ—Ç–∞–º–∏

3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–∞–∫–µ—Ç—ã –Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã —Å Python 3.12+
   - –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –≤–∞–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (numpy, scipy, transformers)

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ 1. –û–±–Ω–æ–≤–ª–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π `requirements.txt`

**–î–æ**:
```txt
fastapi>=0.104.0              # –ë–µ–∑ –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã
torch>=2.0.0                  # –ù–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Python 3.12
spacy>=3.7.0                  # –ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
```

**–ü–æ—Å–ª–µ**:
```txt
fastapi>=0.104.0,<0.110.0     # –° –≤–µ—Ä—Ö–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü–µ–π
torch>=2.1.0,<3.0.0          # Python 3.12 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
spacy>=3.7.0,<4.0.0          # –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

### ‚úÖ 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `requirements/requirements.txt`

**–î–æ**:
```txt
spacy>=3.7.2
ru_core_news_md            # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ! –≠—Ç–æ –Ω–µ PyPI –ø–∞–∫–µ—Ç
nltk>=3.8.1
```

**–ü–æ—Å–ª–µ**:
```txt
spacy>=3.7.2,<4.0.0
# NOTE: SpaCy models installed separately, see spacy_models.txt
nltk>=3.8.1,<4.0.0
```

### ‚úÖ 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –æ—Ñ–ª–∞–π–Ω –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞

**–î–æ**:
```python
# –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—ã—Ç–∞–ª—Å—è —Å–∫–∞—á–∞—Ç—å —á–µ—Ä–µ–∑ pip download
cmd = [sys.executable, "-m", "pip", "download", "--dest", str(spacy_dir), 
       f"https://github.com/.../ru_core_news_lg-3.7.0.tar.gz"]
```

**–ü–æ—Å–ª–µ**:
```python
# –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä—è–º–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å GitHub
import requests
response = requests.get(download_url, stream=True, timeout=300)
# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –º–æ–¥–µ–ª–∏ –¥–ª—è –æ—Ñ–ª–∞–π–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∏
```

### ‚úÖ 4. –û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏

**`scripts/build_offline_requirements.txt`**:
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≤–µ—Ä—Å–∏–æ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Å–±–æ—Ä–∫–∏ (wheel, setuptools)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ SpaCy –º–æ–¥–µ–ª—è—Ö

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **`requirements-python312.txt`** - –î–ª—è Python 3.12+
–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª —Å —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:
```txt
torch>=2.1.0,<3.0.0          # Python 3.12 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
numpy>=1.24.0,<3.0.0         # NumPy 2.0 —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π
transformers>=4.30.0,<5.0.0  # –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
```

### 2. **`spacy_models.txt`** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–¥–µ–ª—è–º SpaCy
–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```txt
# ONLINE:
python -m spacy download ru_core_news_lg

# OFFLINE:
pip install https://github.com/explosion/spacy-models/releases/download/ru_core_news_lg-3.7.0/ru_core_news_lg-3.7.0.tar.gz
```

## üõ†Ô∏è –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –î–ª—è Python 3.12+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π requirements.txt**:
   ```bash
   pip install -r requirements-python312.txt
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ SpaCy –º–æ–¥–µ–ª—å –æ—Ç–¥–µ–ª—å–Ω–æ**:
   ```bash
   # –û–Ω–ª–∞–π–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
   python -m spacy download ru_core_news_lg
   
   # –ò–õ–ò –æ—Ñ–ª–∞–π–Ω —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
   pip install https://github.com/explosion/spacy-models/releases/download/ru_core_news_lg-3.7.0/ru_core_news_lg-3.7.0.tar.gz
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É**:
   ```bash
   python -c "import spacy; nlp = spacy.load('ru_core_news_lg'); print('OK')"
   ```

### –î–ª—è –æ—Ñ–ª–∞–π–Ω –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏**:
   ```bash
   # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Å–±–æ—Ä–∫–∏
   pip install -r scripts/build_offline_requirements.txt
   
   # –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É
   build_offline_dist.bat
   ```

2. **–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**:
   - –°–∫–∞—á–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤
   - –ó–∞–≥—Ä—É–∑–∏—Ç SpaCy –º–æ–¥–µ–ª—å —Å GitHub
   - –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª–Ω—ã–π –æ—Ñ–ª–∞–π–Ω –ø–∞–∫–µ—Ç

## üìä –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π Python

| Python –≤–µ—Ä—Å–∏—è | –°—Ç–∞—Ç—É—Å | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ñ–∞–π–ª |
|---------------|--------|-------------------|
| 3.8 - 3.11 | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | `requirements.txt` |
| 3.12+ | ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | `requirements-python312.txt` |
| 3.13+ | ‚ö†Ô∏è –¢–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è | `requirements-python312.txt` |

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Python:
```bash
python --version
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Python 3.8+ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ requirements.txt
# –ò–ª–∏ Python 3.12+ –¥–ª—è requirements-python312.txt
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:
```bash
pip check
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: No broken requirements found
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ SpaCy –º–æ–¥–µ–ª–∏:
```bash
python -c "import spacy; print(spacy.info('ru_core_news_lg'))"
```

## üéØ –ò—Ç–æ–≥–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:

1. **requirements.txt** - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (Python 3.8-3.11)
2. **requirements-python312.txt** - –î–ª—è Python 3.12+ 
3. **requirements/requirements.txt** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω (—É–±—Ä–∞–Ω ru_core_news_md)
4. **scripts/build_offline_requirements.txt** - –î–ª—è —Å–±–æ—Ä–∫–∏ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞
5. **spacy_models.txt** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–¥–µ–ª—è–º SpaCy

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:
```
ERROR: Could not find a version that satisfies the requirement ru_core_news_md
ERROR: Ignored versions that require different python version
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**:
```
‚úì All packages installed successfully
‚úì SpaCy model downloaded and configured
‚úì Python 3.12+ compatibility ensured
‚úì Offline distribution builds without errors
```

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –æ–±—ã—á–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
# Python 3.8-3.11
pip install -r requirements.txt
python -m spacy download ru_core_news_lg

# Python 3.12+  
pip install -r requirements-python312.txt
python -m spacy download ru_core_news_lg
```

### –î–ª—è –æ—Ñ–ª–∞–π–Ω –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞:
```bash
# –°–±–æ—Ä–∫–∞ (–Ω–∞ –º–∞—à–∏–Ω–µ —Å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–æ–º)
pip install -r scripts/build_offline_requirements.txt
build_offline_dist.bat

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–Ω–∞ –æ—Ñ–ª–∞–π–Ω —Å–µ—Ä–≤–µ—Ä–µ)
scripts\install.bat  # SpaCy –º–æ–¥–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

**–í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!** ‚úÖ